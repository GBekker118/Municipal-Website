﻿@{
ViewData["Title"] = "Home Page";
}

<style>
    /* Background color */
    body {
        margin: 0;
        padding: 0;
        background-color: rgba(4, 152, 84, 0.2);
    }

    .container {
        max-width: 100vw;
        width: 100%;
        padding: 0;
        margin: 0;
    }

    /* Slideshow */
    .slideshow-container {
        max-width: 100vw;
        height: 400px;
        position: relative;
        overflow: hidden;
        user-select: none;
        box-shadow: 2px 2px 5px 2px black;
    }

    .slideshow {
        width: 100%;
        height: 100%;
    }

    .slideshow img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }

    .slideshow::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.2);
        pointer-events: none;
    }

    /* Slideshow Arrows */
    .arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 2.5rem;
        color: white;
        background-color: rgba(0,0,0,0.4);
        border-radius: 50%;
        width: 40px;
        height: 40px;
        line-height: 40px;
        text-align: center;
        cursor: pointer;
        z-index: 10;
        transition: background-color 0.3s;
    }

    .arrow:hover {
        background-color: rgba(0,0,0,0.7);
    }

    .arrow-left {
        left: 10px;
    }

    .arrow-right {
        right: 10px;
    }

    /* Slideshow-Dots */
    .dots-container {
        position: relative;
        z-index: 2;
    }

    .dots-container {
        position: absolute;
        bottom: 15px;
        width: 100%;
        text-align: center;
    }

    .dot {
        display: inline-block;
        width: 12px;
        height: 12px;
        margin: 0 5px;
        background-color: rgba(255,255,255,0.5);
        border-radius: 50%;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .dot.active,
    .dot:hover {
        background-color: rgba(29, 55, 186, 0.9);
    }

    .arrow,
    .dots-container {
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
    }


    .slideshow-container:hover .arrow,
    .slideshow-container:hover .dots-container {
        opacity: 1;
        pointer-events: auto;
    }

    /* Buttons row */
    .button-row {
        max-width: 100vw;
        margin-top: 50px;
        display: flex;
        overflow-x: auto;
        justify-content: center;
        padding: 2%;
        gap: 150px;
        background-color: #063A89;
        /* Back Image*/
        background-image: url('/img/slide3.jpg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    .button-row::-webkit-scrollbar {
        height: 8px;
    }

    .button-row::-webkit-scrollbar-thumb {
        background-color: rgba(0,0,0,0.3);
        border-radius: 4px;
    }

    .buttons {
        background-color: #063A89; /*#D0F4B9*/
        border: 2px solid black;
        padding: 15px 20px;
        text-align: center;
        border-radius: 5px;
        box-shadow: 1px 2px 5px 2px black;
        text-decoration: none;
        color: white;
        font-weight: bold;
        font-size: 20px;
        width: 250px;
        height: 150px;
        white-space: nowrap;
        display: flex;
        flex-direction: column;
        align-items: center;
        transition: background-color 0.3s, transform 0.3s;
    }

    .buttons img {
        width: 40px;
        height: 40px;
        margin-bottom: 10px;
        pointer-events: none;
        user-select: none;
    }

    .buttons:hover {
        color: white;
        filter: brightness(1.2);
        transform: scale(1.1);
    }

    .overlay-message {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 2000;
        background-color: white; /*#28a745*/
        color: black;
        padding: 15px 20px;
        border: 4px solid #28a745;
        border-radius: 10px;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.3);
        font-weight: bold;
        font-size: 18px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        min-width: 250px;
    }

    .overlay-message .close-btn {
        background: none;
        border: none;
        color: black;
        font-size: 22px;
        font-weight: bold;
        cursor: pointer;
        margin-left: 15px;
    }

    .overlay-message .close-btn:hover {
        color: #EC3A26;
    }

    .caption {
        position: absolute;
        bottom: 40px;
        left: 50%;
        transform: translateX(-50%);
        color: white;
        font-size: 24px;
        font-weight: bold;
        background: rgba(0, 0, 0, 0.6);
        padding: 10px 20px;
        border-radius: 8px;
        text-align: center;
        max-width: 80%;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.3);
    }

    .caption.left {
        margin-top: 20px;
        margin-left: 90px;
        top: 20px;
        left: 20px;
        bottom: auto;
        transform: none;
        text-align: left;
        width: 80vh;
    }

    .caption.long {
        position: absolute;
        bottom: 40px;
        left: 50%;
        transform: translateX(-50%);
        color: white;
        font-size: 24px;
        font-weight: bold;
        background: rgba(0, 0, 0, 0.6);
        padding: 10px 20px;
        border-radius: 8px;
        text-align: center;
        width: 80vw;
        max-width: 100%;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.3);
    }

    /* Feedback Button */
    .submit {
        font-weight: bold;
        text-decoration: none;
        box-shadow: 2px 2px 4px 2px black;
        width: 80%;
        border-radius: 5px;
        background-color: #049854;
    }

    .submit:hover {
        transform: scale(1.1);
    }

    .success {
        height: 50px;
        width: 50px;
        background-color: white;
        border-radius: 50px;
        margin-right: 10px;
    }

    h1 {
        font-family: 'Roboto Slab', serif;
    }

    p {
        font-family: 'Open Sans', sans-serif;
    }

    .about-banner {
        display: inline-block;
        width:90vw;
        padding: 15px 30px;
        background: #063A89;
        color: white;
        border-radius: 12px;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.3);
        font-family: 'Roboto Slab', serif;
        font-size: 60px;
        text-decoration: underline;
    }
</style>

<!-- Success Message (If report issue was successfully submitted) -->
@if (TempData["Message"] != null)
{
    <div id="successMessage" class="overlay-message">
        <span><img class="success" src="~/img/check.png" />@TempData["Message"]</span>
        <button class="close-btn" onclick="closeMessage()">×</button>
    </div>
}

<div class="text-center" style="margin:0;">

    <!-- Slideshow -->
    <div class="slideshow-container" style="position:relative;top:-20px;">
        <!-- Slideshow images -->
        <div class="slideshow">
            <img id="slideshow-image" src="~/img/slide1.jpg" alt="Slideshow Image" />
            <div id="slideshow-caption" class="caption">Welcome to our Community Portal</div>
            <div class="arrow arrow-left" id="arrow-left">&#10094;</div>
            <div class="arrow arrow-right" id="arrow-right">&#10095;</div>
            <div class="dots-container" id="dots-container"></div>
        </div>
    </div>

    <!-- About Us -->
    <h1 class="about-banner" style="text-align:center;font-size:60px;margin-bottom:20px;"><u>About Us:</u></h1>
    <div style="display:flex; justify-content:center; align-items:flex-start; gap:40px; margin-top:20px; width:90%; margin:0 auto;">
        <!-- Left paragraph -->
        <p style="flex:1; font-size:20px; font-weight:bold; text-align:justify; padding-right:20px;">
            Welcome to our Community Portal! This platform is designed to connect residents with essential municipal services, updates, and opportunities to actively participate in their community. From reporting local issues and tracking service requests to staying informed about events and notices, our web app provides a simple, user-friendly interface to make civic engagement easy and efficient.
        </p>

        <!-- Right paragraph -->
        <p style="flex:1; font-size:20px; font-weight:bold; text-align:justify; padding-left:20px;">
            We believe that every citizen plays a vital role in building stronger, safer, and more vibrant communities. Through this portal, you can share feedback, access timely updates, and stay involved in local initiatives. Our goal is to create a seamless connection between the municipality and its residents, empowering everyone to contribute to cleaner, smarter, and more sustainable neighborhoods.
        </p>
    </div>

    <!-- Feedback Survey -->
    <div style="background-color:#F0E5E8; margin:15px;border:3px solid black; border-radius:10px; box-shadow: 2px 3px 20px rgba(0,0,0,0.3);">
        <h1 style="text-align:center;font-size:60px"><u>Feedback Survey:</u></h1>
        <!-- Survey paragraph -->
        <p style="flex:1; font-size:20px; font-weight:bold; padding-right:20px; margin:20px;text-align:center">
            At Evergreen Municipal, we greatly value your feedback and participation.
            We invite you to share your thoughts on how we can enhance your experience with our website and improve the services we provide to the community. Whether it’s suggestions for improvement or positive feedback about what we’re doing well, your input helps us grow and serve you better.

            Thank you for taking the time to share your voice it truly makes a difference.
        </p>
        <a class="submit btn-primary px-4 py-2" style="font-size:20px;" asp-controller="Feedback" asp-action="FeedbackSurvey">
            Go To Survey &#10140;


        </a>
        <br />
        <br />
    </div>

    <!-- Button Row -->
    <div class="button-row">
        <a class="buttons" asp-controller="Reports" asp-action="ReportIssues">
            <img src="~/img/reports.png" alt="Report Issues" />
            Report Issues
        </a>

        <a class="buttons" asp-controller="Events" asp-action="EventIndex">
            <img src="~/img/events.png" alt="Local Events" />
            Local Events <br />and Announcements
        </a>

        <a class="buttons" asp-controller="ServiceRequests" asp-action="ServiceRequestIndex">
            <img src="~/img/status.png" alt="Service Request Status" />
            Service Request Status
        </a>
    </div>
</div>

<!-- Javascript function to allow slideshow animations -->
<script>
    (() => {
        const images = [
            '@Url.Content("~/img/slide2.jpg")',
            '@Url.Content("~/img/Roads.jpg")',
            '@Url.Content("~/img/slide 3.jpg")',
            '@Url.Content("~/img/slide4.jpg")'
        ];

        const captions = [
            "Welcome to our Community Portal",
            "Our municipality is dedicated to providing essential services for the community, including sanitation, road maintenance, and utility management to ensure a safe and well functioning environment for all residents.",
            "Please use our issue report feature to report any issues or concerns that you believe should be addressed to help improve life within the community.",
            "Your voice matters! Participate in our survey to provide feedback and help improve your municipality’s website."
        ];

        let index = 0;
        const slideshowImage = document.getElementById('slideshow-image');
        const dotsContainer = document.getElementById('dots-container');
        const arrowLeft = document.getElementById('arrow-left');
        const arrowRight = document.getElementById('arrow-right');
        let timer;

        function showImage(i) {
            index = i;
            slideshowImage.src = images[index];

            const captionElement = document.getElementById("slideshow-caption");
            captionElement.textContent = captions[index];

            // Add/remove text alignment for slides
            if (index === 1) {
                captionElement.classList.add("left");
            } else {
                captionElement.classList.remove("left");
            }
            if (index === 2) {
                captionElement.classList.add("long");
            } else {
                captionElement.classList.remove("long");
            }


            updateDots();
        }

        function updateDots() {
            dotsContainer.innerHTML = '';
            images.forEach((_, i) => {
                const dot = document.createElement('span');
                dot.classList.add('dot');
                if (i === index) dot.classList.add('active');
                dot.addEventListener('click', () => {
                    resetTimer();
                    showImage(i);
                });
                dotsContainer.appendChild(dot);
            });
        }

        function nextImage() {
            index = (index + 1) % images.length;
            showImage(index);
        }

        function prevImage() {
            index = (index - 1 + images.length) % images.length;
            showImage(index);
        }

        arrowLeft.addEventListener('click', () => {
            resetTimer();
            prevImage();
        });

        arrowRight.addEventListener('click', () => {
            resetTimer();
            nextImage();
        });

        function resetTimer() {
            clearInterval(timer);
            timer = setInterval(nextImage, 5000);
        }

        showImage(index);
        timer = setInterval(nextImage, 5000);
    })();
</script>
<!-- Javascript function to allow Success Message pop up, and allow for it to be closed -->
<script>
    function closeMessage() {
        var msg = document.getElementById('successMessage');
        if(msg) {
            msg.style.display = 'none';
        }
    }

    setTimeout(() => {
        var msg = document.getElementById('successMessage');
        if(msg) msg.style.display = 'none';
    }, 5000);
</script>

<!-- References:

    www.w3schools.com. (n.d.). How to Create a Slideshow. [online] Available at: https://www.w3schools.com/howto/howto_js_slideshow.asp.
    www.w3schools.com. (n.d.). How To Create a Slideshow. [online] Available at: https://www.w3schools.com/howto/howto_js_slideshow_gallery.asp.
    ‌www.w3schools.com. (n.d.). HTML DOM Style display Property. [online] Available at: https://www.w3schools.com/Jsref/prop_style_display.asp.‌
-->
